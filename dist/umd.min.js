!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).ForkedToast={})}(this,(function(t){"use strict";var e;t.ToastMsgType=void 0,(e=t.ToastMsgType||(t.ToastMsgType={})).info="info",e.success="success",e.warning="warning",e.error="error";var o="toast",n={oldestFirst:!0,text:"Toast is awesome!",node:void 0,duration:3e3,selector:void 0,callback:function(){},destination:void 0,newWindow:!1,close:!1,gravity:"top",positionLeft:!1,position:"",avatar:"",className:"",stopOnFocus:!0,onClick:function(){},offset:{x:0,y:0},escapeMarkup:!0,ariaLive:"polite",style:{background:""},type:""},i=function(){function e(t){this.toastElement=null,this._rootElement=null,this.timeOut=null,this.version="1.0.0",this.options=n,this.toastElement=null,this._rootElement=document.body,this._init(t)}return e.prototype.show=function(){var t=this;if(this.toastElement=this._build(),"string"==typeof this.options.selector?this._rootElement=document.getElementById(this.options.selector):this.options.selector instanceof HTMLElement||this.options.selector instanceof ShadowRoot?this._rootElement=this.options.selector:this._rootElement=document.body,!this._rootElement)throw"Root element is not defined";return this._rootElement.insertBefore(this.toastElement,this._rootElement.firstChild),this._reposition(),this.options.duration>0&&(this.timeOut=window.setTimeout((function(){t._removeElement(t.toastElement)}),this.options.duration)),this},e.prototype.hide=function(){this.timeOut&&clearTimeout(this.timeOut),this._removeElement(this.toastElement)},e.prototype._init=function(t){this.options=Object.assign(n,t)},e.prototype._build=function(){var e=this;if(!this.options)throw"Toast is not initialized";var n=this.options,i=n.className,s=n.position,a=n.style,c=n.gravity,r=n.ariaLive,l=n.node,p=n.text,d=n.type,u=n.close,f=n.stopOnFocus,m=n.duration,h=n.destination,v=n.offset,y=document.createElement("div");for(var E in y.className="toast on ".concat(i," toast-").concat(s," ").concat(o,"-").concat(c),a)y.style[E]=a[E];r&&y.setAttribute("aria-live",r);var w=document.createElement("div");if(w.className="toast-content",y.appendChild(w),l&&l.nodeType===Node.ELEMENT_NODE)w.appendChild(l);else{var _=document.createElement("span");if(this.options.escapeMarkup?(_.innerText=p,w.appendChild(_)):(_.innerHTML=p,w.appendChild(_)),d){var T=document.createElement("i");T.className="toast-icon ".concat(t.ToastMsgType[d]?"toast-icon--".concat(t.ToastMsgType[d]):""),_&&_.parentNode.insertBefore(T,_)}}if(!0===u){var g=document.createElement("button");g.type="button",g.setAttribute("aria-label","Close"),g.className="toast-close",g.innerHTML='<i class="toast-close-i"></i>',g.addEventListener("click",(function(t){t.stopPropagation(),e._removeElement(e.toastElement),e.timeOut&&window.clearTimeout(e.timeOut)}));var b=window.innerWidth>0?window.innerWidth:screen.width;"left"==s&&b>360?y.insertAdjacentElement("afterbegin",g):w.appendChild(g)}if(f&&m>0&&(y.addEventListener("mouseover",(function(){e.timeOut&&window.clearTimeout(e.timeOut)})),y.addEventListener("mouseleave",(function(){e.timeOut=window.setTimeout((function(){e._removeElement(y)}),m)}))),void 0!==h&&y.addEventListener("click",(function(t){t.stopPropagation(),!0===e.options.newWindow?window.open(h,"_blank"):window.location=h})),"function"==typeof this.options.onClick&&void 0===h&&y.addEventListener("click",(function(t){t.stopPropagation(),e.options.onClick()})),"object"==typeof v){var N=this._getAxisOffsetAValue("x",this.options),O=this._getAxisOffsetAValue("y",this.options),x="left"==s?N:"-".concat(N),L=c=="".concat(o,"-top")?O:"-".concat(O);y.style.transform="translate(".concat(x,",").concat(L,")")}return y},e.prototype._removeElement=function(t){var e=this;t.className=t.className.replace(" on",""),window.setTimeout((function(){e.options.node&&e.options.node.parentNode&&e.options.node.parentNode.removeChild(e.options.node),t.parentNode&&t.parentNode.removeChild(t),e.options.callback.call(t),e._reposition()}),400)},e.prototype._reposition=function(){for(var t,e={top:15,bottom:15},n={top:15,bottom:15},i={top:15,bottom:15},s=this._rootElement.querySelectorAll(".toast"),a=0;a<s.length;a++){var c=s[a];console.log(c.classList,"".concat(o,"-top"),c.classList.contains("".concat(o,"-top"))),t=c.classList.contains("".concat(o,"-top"))?"".concat(o,"-top"):"".concat(o,"-bottom");var r=c.offsetHeight;t=t.slice(6);console.log(t),(window.innerWidth>0?window.innerWidth:screen.width)<=360?(c.style[t]="".concat(i[t],"px"),i[t]+=r+15):!0===s[a].classList.contains("toast-left")?(c.style[t]="".concat(e[t],"px"),e[t]+=r+15):(c.style[t]="".concat(n[t],"px"),n[t]+=r+15)}},e.prototype._getAxisOffsetAValue=function(t,e){return e.offset[t]?isNaN(e.offset[t])?e.offset[t]:"".concat(e.offset[t],"px"):"0px"},e}();t.default=function(t){return new i(t)},Object.defineProperty(t,"__esModule",{value:!0})}));
